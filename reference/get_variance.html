<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='This function extracts the different variance components of a mixed model and
returns the result as list. Functions like get_variance_residual(x) or
get_variance_fixed(x) are shortcuts for get_variance(x, component = "residual") etc.'><title>Get variance components from random effects models — get_variance • insight</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get variance components from random effects models — get_variance"><meta property="og:description" content='This function extracts the different variance components of a mixed model and
returns the result as list. Functions like get_variance_residual(x) or
get_variance_fixed(x) are shortcuts for get_variance(x, component = "residual") etc.'><meta property="og:image" content="/reference/figures/card.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@easystats4u"><meta name="twitter:site" content="@easystats4u"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">insight</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.17.1.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/insight.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/display.html">Formatting, printing and exporting tables</a>
    <a class="dropdown-item" href="../articles/export.html">Exporting tables with captions and footers</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="http://twitter.com/easystats4u" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/easystats/insight/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get variance components from random effects models</h1>
      <small class="dont-index">Source: <a href="https://github.com/easystats/insight/blob/HEAD/R/get_variances.R" class="external-link"><code>R/get_variances.R</code></a></small>
      <div class="d-none name"><code>get_variance.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function extracts the different variance components of a mixed model and
returns the result as list. Functions like <code>get_variance_residual(x)</code> or
<code>get_variance_fixed(x)</code> are shortcuts for <code>get_variance(x, component = "residual")</code> etc.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">get_variance</span><span class="op">(</span>
  <span class="va">x</span>,
  component <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"all"</span>, <span class="st">"fixed"</span>, <span class="st">"random"</span>, <span class="st">"residual"</span>, <span class="st">"distribution"</span>, <span class="st">"dispersion"</span>,
    <span class="st">"intercept"</span>, <span class="st">"slope"</span>, <span class="st">"rho01"</span>, <span class="st">"rho00"</span><span class="op">)</span>,
  verbose <span class="op">=</span> <span class="cn">TRUE</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="fu">get_variance_residual</span><span class="op">(</span><span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">get_variance_fixed</span><span class="op">(</span><span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">get_variance_random</span><span class="op">(</span><span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, tolerance <span class="op">=</span> <span class="fl">1e-05</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">get_variance_distribution</span><span class="op">(</span><span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">get_variance_dispersion</span><span class="op">(</span><span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">get_variance_intercept</span><span class="op">(</span><span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">get_variance_slope</span><span class="op">(</span><span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">get_correlation_slope_intercept</span><span class="op">(</span><span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">get_correlation_slopes</span><span class="op">(</span><span class="va">x</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A mixed effects model.</p></dd>
<dt>component</dt>
<dd><p>Character value, indicating the variance component that should
be returned. By default, all variance components are returned. The
distribution-specific (<code>"distribution"</code>) and residual (<code>"residual"</code>)
variance are the most computational intensive components, and hence may
take a few seconds to calculate.</p></dd>
<dt>verbose</dt>
<dd><p>Toggle off warnings.</p></dd>
<dt>...</dt>
<dd><p>Currently not used.</p></dd>
<dt>tolerance</dt>
<dd><p>Tolerance for singularity check of random effects, to decide
whether to compute random effect variances or not. Indicates up to which
value the convergence result is accepted. The larger tolerance is, the
stricter the test will be. See <code><a href="https://easystats.github.io/performance/reference/check_singularity.html" class="external-link">performance::check_singularity()</a></code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with following elements:</p><ul><li><p><code>var.fixed</code>, variance attributable to the fixed effects</p></li>
<li><p><code>var.random</code>, (mean) variance of random effects</p></li>
<li><p><code>var.residual</code>, residual variance (sum of dispersion and distribution)</p></li>
<li><p><code>var.distribution</code>, distribution-specific variance</p></li>
<li><p><code>var.dispersion</code>, variance due to additive dispersion</p></li>
<li><p><code>var.intercept</code>, the random-intercept-variance, or between-subject-variance (τ<sub>00</sub>)</p></li>
<li><p><code>var.slope</code>, the random-slope-variance (τ<sub>11</sub>)</p></li>
<li><p><code>cor.slope_intercept</code>, the random-slope-intercept-correlation (ρ<sub>01</sub>)</p></li>
<li><p><code>cor.slopes</code>, the correlation between random slopes (ρ<sub>00</sub>)</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function returns different variance components from mixed models,
which are needed, for instance, to calculate r-squared measures or the
intraclass-correlation coefficient (ICC).</p><div class="section">
<h3 id="fixed-effects-variance">Fixed effects variance<a class="anchor" aria-label="anchor" href="#fixed-effects-variance"></a></h3>
<p>The fixed effects variance, σ<sup>2</sup><sub>f</sub>,
is the variance of the matrix-multiplication β∗X
(parameter vector by model matrix).</p>
</div>
<div class="section">
<h3 id="random-effects-variance">Random effects variance<a class="anchor" aria-label="anchor" href="#random-effects-variance"></a></h3>
<p>The random effect variance, σ<sup>2</sup><sub>i</sub>,
represents the <em>mean</em> random effect variance of the model. Since
this variance reflect the "average" random effects variance for mixed
models, it is also appropriate for models with more complex random
effects structures, like random slopes or nested random effects.
Details can be found in <cite>Johnson 2014</cite>, in particular equation 10.
For simple random-intercept models, the random effects variance equals
the random-intercept variance.</p>
</div>
<div class="section">
<h3 id="distribution-specific-variance">Distribution-specific variance<a class="anchor" aria-label="anchor" href="#distribution-specific-variance"></a></h3>
<p>The distribution-specific variance,
σ<sup>2</sup><sub>d</sub>,
depends on the model family. For Gaussian models, it is
σ<sup>2</sup> (i.e.
<code>sigma(model)^2</code>). For models with binary outcome, it is
\(\pi^2 / 3\) for logit-link, <code>1</code> for probit-link, and \(\pi^2 / 6\)
for cloglog-links. Models from Gamma-families use \(\mu^2\) (as obtained
from <code>family$variance()</code>). For all other models, the distribution-specific
variance is based on lognormal approximation, \(log(1 + var(x) / \mu^2)\)
(see <cite>Nakagawa et al. 2017</cite>). The expected variance of a zero-inflated
model is computed according to <cite>Zuur et al. 2012, p277</cite>.</p>
</div>
<div class="section">
<h3 id="variance-for-the-additive-overdispersion-term">Variance for the additive overdispersion term<a class="anchor" aria-label="anchor" href="#variance-for-the-additive-overdispersion-term"></a></h3>
<p>The variance for the additive overdispersion term,
σ<sup>2</sup><sub><em>e</em></sub>,
represents “the excess variation relative to what is expected
from a certain distribution” (Nakagawa et al. 2017). In (most? many?)
cases, this will be <code>0</code>.</p>
</div>
<div class="section">
<h3 id="residual-variance">Residual variance<a class="anchor" aria-label="anchor" href="#residual-variance"></a></h3>
<p>The residual variance, σ<sup>2</sup><sub>ε</sub>,
is simply σ<sup>2</sup><sub>d</sub> + σ<sup>2</sup><sub><em>e</em></sub>.</p>
</div>
<div class="section">
<h3 id="random-intercept-variance">Random intercept variance<a class="anchor" aria-label="anchor" href="#random-intercept-variance"></a></h3>
<p>The random intercept variance, or <em>between-subject</em> variance
(τ<sub>00</sub>),
is obtained from <code><a href="https://rdrr.io/pkg/lme4/man/VarCorr.html" class="external-link">VarCorr()</a></code>. It indicates how much groups
or subjects differ from each other, while the residual variance
σ<sup>2</sup><sub>ε</sub>
indicates the <em>within-subject variance</em>.</p>
</div>
<div class="section">
<h3 id="random-slope-variance">Random slope variance<a class="anchor" aria-label="anchor" href="#random-slope-variance"></a></h3>
<p>The random slope variance (τ<sub>11</sub>)
is obtained from <code><a href="https://rdrr.io/pkg/lme4/man/VarCorr.html" class="external-link">VarCorr()</a></code>. This measure is only available
for mixed models with random slopes.</p>
</div>
<div class="section">
<h3 id="random-slope-intercept-correlation">Random slope-intercept correlation<a class="anchor" aria-label="anchor" href="#random-slope-intercept-correlation"></a></h3>
<p>The random slope-intercept correlation
(ρ<sub>01</sub>)
is obtained from <code><a href="https://rdrr.io/pkg/lme4/man/VarCorr.html" class="external-link">VarCorr()</a></code>. This measure is only available
for mixed models with random intercepts and slopes.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>This function supports models of class <code>merMod</code> (including models
from <span class="pkg">blme</span>), <code>clmm</code>, <code>cpglmm</code>, <code>glmmadmb</code>, <code>glmmTMB</code>,
<code>MixMod</code>, <code>lme</code>, <code>mixed</code>, <code>rlmerMod</code>, <code>stanreg</code>,
<code>brmsfit</code> or <code>wbm</code>. Support for objects of class <code>MixMod</code>
(<span class="pkg">GLMMadaptive</span>), <code>lme</code> (<span class="pkg">nlme</span>) or <code>brmsfit</code> (<span class="pkg">brms</span>)
is experimental and may not work for all models.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    
<ul><li><p>Johnson, P. C. D. (2014). Extension of Nakagawa &amp; Schielzeth’s R2 GLMM to
random slopes models. Methods in Ecology and Evolution, 5(9), 944–946.
<a href="https://doi.org/10.1111/2041-210X.12225" class="external-link">doi:10.1111/2041-210X.12225</a></p></li>
<li><p>Nakagawa, S., Johnson, P. C. D., &amp; Schielzeth, H. (2017). The coefficient
of determination R2 and intra-class correlation coefficient from generalized
linear mixed-effects models revisited and expanded. Journal of The Royal
Society Interface, 14(134), 20170213. <a href="https://doi.org/10.1098/rsif.2017.0213" class="external-link">doi:10.1098/rsif.2017.0213</a></p></li>
<li><p>Zuur, A. F., Savel'ev, A. A., &amp; Ieno, E. N. (2012). Zero inflated models
and generalized linear mixed models with R. Newburgh, United Kingdom:
Highland Statistics.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lme4/lme4/" class="external-link">lme4</a></span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sleepstudy</span><span class="op">)</span></span>
<span class="r-in"><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lme4/man/lmer.html" class="external-link">lmer</a></span><span class="op">(</span><span class="va">Reaction</span> <span class="op">~</span> <span class="va">Days</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">Days</span> <span class="op">|</span> <span class="va">Subject</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">sleepstudy</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">get_variance</span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">get_variance_fixed</span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">get_variance_residual</span><span class="op">(</span><span class="va">m</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/strengejacke/" class="external-link">Daniel Lüdecke</a>, <a href="https://dominiquemakowski.github.io/" class="external-link">Dominique Makowski</a>, <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>, Philip Waggoner, <a href="https://sites.google.com/view/mattansb/" class="external-link">Mattan S. Ben-Shachar</a>, <a href="https://wiernik.org/" class="external-link">Brenton M. Wiernik</a>, Vincent Arel-Bundock.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.9000.</p>
</div>

    </footer></div>

  

  

  </body></html>

